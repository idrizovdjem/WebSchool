@using WebSchool.ViewModels.Post
@model PostViewModel

@{
    Layout = "_Layout";
    ViewData["Title"] = "Post";
}

<div class="container custom-container">
    <section class="col-md-8 offset-md-2">
        <article>
            <h2>@Model.Title</h2>
            <p>@Model.Content</p>
            <div>
                <span class="badge bg-success">By @Model.Creator</span>
                <span class="badge bg-primary">@Model.Comments.Length Comments</span>
                <span class="badge bg-secondary">Posted @Model.CreatedOn</span>

                @if (Model.IsCreator == true)
                {
                    <div class="badge bg-danger float-end ms-3">
                        <a class="text-decoration-none text-light h6" href="#">
                            <i class="fas fa-trash-alt"></i>
                            Delete
                        </a>
                    </div>

                    <div class="badge bg-warning float-end">
                        <a class="text-decoration-none text-light h6" href="#">
                            <i class="fas fa-edit"></i>
                            Edit
                        </a>
                    </div>
                }
            </div>
        </article>

        <h2 class="mt-3">Comments</h2>
        <hr />

        @foreach (var comment in Model.Comments)
        {
            <article>
                <p>@comment.Content</p>
                <div>
                    <span class="badge bg-success">By @comment.Creator</span>
                    <span class="badge bg-secondary">Posted @comment.CreatedOn</span>

                    @if (Model.IsCreator == true)
                    {
                        <div class="badge bg-danger float-end ms-3">
                            <a class="text-decoration-none text-light h6" href="#">
                                <i class="fas fa-trash-alt"></i>
                                Delete
                            </a>
                        </div>

                        <div class="badge bg-warning float-end">
                            <a class="text-decoration-none text-light h6" href="#">
                                <i class="fas fa-edit"></i>
                                Edit
                            </a>
                        </div>
                    }
                </div>
            </article>
            <hr />
        }

        <form asp-controller="Comments" asp-action="Create" method="post" class="mt-3">
            <input type="hidden" name="postId" value="@Model.Id" />

            <div class="mb-3">
                <textarea name="content" rows="4" class="form-control" placeholder="Leave your opinion"></textarea>
            </div>

            <button class="btn btn-primary w-25">Send</button>
        </form>
    </section>
</div>