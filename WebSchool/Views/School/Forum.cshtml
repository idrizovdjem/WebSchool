@{
    Layout = "_Layout";
}

@model WebSchool.Models.School.SchoolViewModel

<link rel="stylesheet" href="~/css/createpost.css" />

<div class="row">
    <div class="col-md-12 text-center">
        <img src="@Model.ImageUrl" height="200" class="w-100" />
        <h2 class="mt-3">@Model.Name</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-6 offset-3 text-center mt-2">
        <form method="post" asp-controller="School" asp-action="CreatePost">
            <h3 onclick="handlePost()" id="addButton">Add new post</h3>
            <div id="postForm" style="display: none;">
                <div class="form-group" id="postForm">
                    <textarea class="form-control" placeholder="Post content" rows="5" name="content"></textarea>
                </div>
                <button class="btn btn-primary w-100" type="submit">Post</button>
            </div>
        </form>
    </div>
</div>

<ul class="list-unstyled">
    @foreach (var post in Model.Posts)
    {
        <li class="media mt-3">
            <img class="mr-3" src="https://i.pinimg.com/originals/0c/3b/3a/0c3b3adb1a7530892e55ef36d3be6cb8.png" width="64" height="64">
            <div class="media-body">
                <h5 class="mt-0">@post.Creator.Email</h5>
                @post.Content
            </div>
        </li>
    }
</ul>

<nav aria-label="Page navigation example" class="fixed-bottom">
    <ul class="pagination justify-content-center">
        @if (Model.Page > 1)
        {
            <li class="page-item"><a class="page-link" href="/School/Forum?page=@(Model.Page - 1)">@(Model.Page - 1) </a></li>
        }
        <li class="page-item active"><a class="page-link" href="/School/Forum?page=@(Model.Page)">@Model.Page</a></li>
        @if (Model.Page < Model.MaxPages)
        {
            <li class="page-item"><a class="page-link" href="/School/Forum?page=@(Model.Page + 1)">@(Model.Page + 1) </a></li>
        }
    </ul>
</nav>

@section Scripts {
    <script src="~/js/handlePost.js"></script>
}